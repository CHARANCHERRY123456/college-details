<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body{
            background-color: aqua;
        }
    </style>
    <title>Users</title>
</head>
<body>
    <% if(locals.users){ %>
        <h2><%= users.length %> </h2>
        <table border="1px solid black">
                <thead>
                    <td>Email</td>
                    <td>password</td>
                    <td>account_type</td>
                </thead>
                <% for( let i = 0; i < users.length; i++ ) { %>
                    <tr>
                        <td><%= users[i].email %> </td>
                        <td><%= users[i].password %> </td>
                        <td><%= users[i].account_type %> </td>
                    </tr>
                    <% } %>
                    
                </table>
                <% }else if(locals.friends){ %>
                    <h2><%= friends.length %> </h2>
                    <ol>
                        <% for( let i = 0; i < friends.length; i++ ) { %>
                            <li><%= friends[i].email %> </li>
                            <% } %>
                        </ol>
            <% }else if(locals.search){ %>
            <div id="membersContainer">
                <h2><%= search.length %> </h2>
                <ol>
                <% for( let i = 0; i < search.length; i++ ) { %>
                    <div class="member" data-member-id="1"><%= search[i].person %></div>
                    <ul class="searchedList" data-member-id="1" style="display: none;">
                        <% for( let j = 0; j < search[i].searched_for.length; j++ ) { %>
                            <li>
                                <%= search[i].searched_for[j] %>
                            </li>
                        <% } %>
                    </ul>
                    <!-- <li><%= search[i].person %> </li>
                    <ol>
                    <% for( let j = 0; j < search[i].searched_for.length; j++ ) { %>
                        <li>
                            <%= search[i].searched_for[j] %>
                        </li>
                    <% } %>
                    </ol> -->
                <% } %>
                </ol>
            </div>
            <% } %>

            <script>
                // Select all member divs
                const members = document.querySelectorAll('.member');

                members.forEach(member => {
                    member.addEventListener('click', function() {
                        // Get the corresponding searched list
                        const searchedList = document.querySelector(`.searchedList[data-member-id="${this.dataset.memberId}"]`);
                        
                        // Toggle display of the searched list
                        if (searchedList.style.display === 'none' || searchedList.style.display === '') {
                            searchedList.style.display = 'block';  // Show the list
                        } else {
                            searchedList.style.display = 'none';  // Hide the list
                        }
                    });
                });

            </script>
</body>
</html>